Test 1
------

insmod bcm63xx-phone.ko mask=0x303 frame_size=256 ts_to_chans=0,0,1,1 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 01 00 00 04 05  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 02 03 20 21 06 07 24 25  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 22 23 40 41 26 27 44 45  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 42 43 60 61 46 47 64 65  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 62 63 80 81 66 67 84 85  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 82 83 A0 A1 86 87 A4 A5  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A2 A3 C0 C1 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C2 C3 E0 E1 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E2 E3 00 01 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 2
------

Idem test 1 dessus mais aucun channel actif en TX (mask 0x300)
insmod bcm63xx-phone.ko mask=0x300 frame_size=256 ts_to_chans=0,0,1,1 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 01 00 00 04 05  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 02 03 20 21 06 07 24 25  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 22 23 40 41 26 27 44 45  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 42 43 60 61 46 47 64 65  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 62 63 80 81 66 67 84 85  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 82 83 A0 A1 86 87 A4 A5  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A2 A3 C0 C1 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C2 C3 E0 E1 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E2 E3 00 01 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 3
------

Idem test 1 mais DATA_16 = 1 (0x23a00100 -> PCM_CTRL_REG) (mask 0x303)

insmod bcm63xx-phone.ko mask=0x303 frame_size=0x00800100 ts_to_chans=0,0,1,1 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 00 00 00 04 05  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 20 21 22 23 26 27 44 45  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 60 61 62 63 66 67 84 85  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A0 A1 A2 A3 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C0 C1 C2 C3 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E0 E1 E2 E3 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000120: 00 01 02 03 06 07 24 25  00 00 00 00 00 00 00 00
0x00000130: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000140: 20 21 22 23 26 27 44 45  00 00 00 00 00 00 00 00
0x00000150: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000160: 40 41 42 43 46 47 64 65  00 00 00 00 00 00 00 00
0x00000170: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000180: 60 61 62 63 66 67 84 85  00 00 00 00 00 00 00 00

Conclusion temporaire : il semblerait que le flag DATA_16, ait
une influence sur la largeur du timeslot vu par le module PCM
Si DATA_16 = 0, timeslot fait 8 bits
Si DATA_16 = 1, timeslot fait 16 bits

Test 4
------

Idem test 1 mais frame 1024 bits (0x23200400 -> PCM_CTRL_REG) (mask 0x303)
insmod bcm63xx-phone.ko mask=0x300 frame_size=1024 ts_to_chans=0,0,1,1 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 01 00 00 04 05  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 02 03 20 21 06 07 24 25  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 22 23 40 41 26 27 44 45  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 42 43 60 61 46 47 64 65  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 62 63 80 81 66 67 84 85  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 82 83 A0 A1 86 87 A4 A5  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A2 A3 C0 C1 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C2 C3 E0 E1 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E2 E3 00 01 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Conclusion : pas de changement entre frame 1024 et 256 bits

Test 5
------

Idem test 1 mais frame 1 bits (0x23200001 -> PCM_CTRL_REG) (mask 0x303)
insmod bcm63xx-phone.ko mask=0x300 frame_size=1 ts_to_chans=0,0,1,1 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 01 00 00 04 05  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 02 03 20 21 06 07 24 25  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 22 23 40 41 26 27 44 45  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 42 43 60 61 46 47 64 65  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 62 63 80 81 66 67 84 85  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 82 83 A0 A1 86 87 A4 A5  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A2 A3 C0 C1 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C2 C3 E0 E1 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E2 E3 00 01 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Conclusion : pas de changement entre frame 1 et 256 bits

Test 6
------

Idem test 5, mais DATA_16 on (0x23a00001 -> PCM_CTRL_REG) (mask 0x303)
insmod bcm63xx-phone.ko mask=0x303 frame_size=0x00800001 ts_to_chans=0,0,1,1 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 00 00 00 04 05  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 20 21 22 23 26 27 44 45  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 60 61 62 63 66 67 84 85  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A0 A1 A2 A3 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C0 C1 C2 C3 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E0 E1 E2 E3 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000120: 00 01 02 03 06 07 24 25  00 00 00 00 00 00 00 00
0x00000130: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000140: 20 21 22 23 26 27 44 45  00 00 00 00 00 00 00 00
0x00000150: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000160: 40 41 42 43 46 47 64 65  00 00 00 00 00 00 00 00
0x00000170: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000180: 60 61 62 63 66 67 84 85  00 00 00 00 00 00 00 00

Conclusion : pas de changement entre frame 1 et 256 bits

Test 7
------

Idem test 4, mais DATA_16 = 1 (0x23a00400 -> PCM_CTRL_REG) (mask 0x303)
insmod bcm63xx-phone.ko mask=0x300 frame_size=0x00800400 ts_to_chans=0,0,1,1 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 00 00 00 04 05  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 20 21 22 23 26 27 44 45  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 40 41 42 43 46 47 64 65  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 60 61 62 63 66 67 84 85  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 80 81 82 83 86 87 A4 A5  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A0 A1 A2 A3 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C0 C1 C2 C3 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E0 E1 E2 E3 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000120: 00 01 02 03 06 07 24 25  00 00 00 00 00 00 00 00
0x00000130: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000140: 20 21 22 23 26 27 44 45  00 00 00 00 00 00 00 00

Conclusion : pas de changement entre frame 1024 et 256 bits

Test 8
------

Idem test 1 mais frame = 128 bits (0x23200080 -> PCM_CTRL_REG)

insmod bcm63xx-phone.ko mask=0x3FF frame_size=128 ts_to_chans=0,0,1,1 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 01 00 00 04 05  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 02 03 20 21 06 07 24 25  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 22 23 40 41 26 27 44 45  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 42 43 60 61 46 47 64 65  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 62 63 80 81 66 67 84 85  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 82 83 A0 A1 86 87 A4 A5  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A2 A3 C0 C1 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C2 C3 E0 E1 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E2 E3 00 01 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Conclusion : pas de changement entre frame 128 et 256 bits

Test 10
-------

Idem test 1 mais avec tous les channels RX actifs (mask 0xff03)
0x23200100 -> PCM_CTRL_REG

insmod bcm63xx-phone.ko mask=0xFF03 frame_size=256 ts_to_chans=0,0,1,1 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 01 00 00 04 05  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 02 03 20 21 06 07 24 25  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 22 23 40 41 26 27 44 45  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 42 43 60 61 46 47 64 65  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 62 63 80 81 66 67 84 85  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 82 83 A0 A1 86 87 A4 A5  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A2 A3 C0 C1 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C2 C3 E0 E1 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E2 E3 00 01 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 11
-------

Idem test 1 mais avec aucun channel actif RX (mask 0x3)
0x23200100 -> PCM_CTRL_REG

Tous les octets sont a 0

Conclusion : on continue a recevoir des donnees mais nulles.
L'emission est active puisque l'on ne reste pas bloque sur l'attente
de buffer TX.
On recoit des donnees mais qui ne correspond a rien

Est-ce que cela demontre que la table indique les timeslot emis et
que les flags RX le nombre d'octets recus

Test 12
-------

Idem test 1 mais avec aucun channel RX et TX actifs (mask 0x0)
0x23200100 -> PCM_CTRL_REG

Pas de donnee recue, on reste bloque sur l'attente qu'un buffer TX se libere, alors que l'on continue
a allouer les timeslot 0 et 1 au channel 0 et 1

Il faudrait savoir si l'on recoit des donnees ?

Test 13
-------

Idem test 1 mais avec tous les channels RX et TX actifs (mask 0xffff)
0x23200100 -> PCM_CTRL_REG

insmod bcm63xx-phone.ko mask=0xFFFF frame_size=256 ts_to_chans=0,0,1,1 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 01 00 00 04 05  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 02 03 20 21 06 07 24 25  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 22 23 40 41 26 27 44 45  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 42 43 60 61 46 47 64 65  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 62 63 80 81 66 67 84 85  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 82 83 A0 A1 86 87 A4 A5  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A2 A3 C0 C1 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C2 C3 E0 E1 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E2 E3 00 01 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

On continue a recevoir le meme nombre d'octets significatifs

Test 14
-------

Idem test 13 avec timeslot 0 et 1 affectes au channel 0 (mask 0xffff)
0x23200100 -> PCM_CTRL_REG

insmod bcm63xx-phone.ko mask=0xFFFF frame_size=256 ts_to_chans=0,0,1,0 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

[ 4102.876000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=0, timeslot=0)
[ 4102.884000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=0, timeslot=1)

0x00000000: 00 00 00 01 00 00 00 00  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 22 23 40 41 00 00 00 00  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 42 43 60 61 00 00 00 00  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 62 63 80 81 00 00 00 00  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 82 83 A0 A1 00 00 00 00  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A2 A3 C0 C1 00 00 00 00  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C2 C3 E0 E1 00 00 00 00  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E2 E3 00 01 00 00 00 00  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
Le nombre d'octets significatifs a diminue de moitie.
Il semblerait que l'on ne transmette que le timeslot 0

Test 15
-------

Idem test 13 avec timeslot 0 et 1 affectes aux channels 6, 7 (mask 0xffff)
0x23200100 -> PCM_CTRL_REG

insmod bcm63xx-phone.ko mask=0xFFFF frame_size=256 ts_to_chans=0,6,1,7 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 18 19 00 00 1C 1D
0x00000020: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  1A 1B 38 39 1E 1F 3C 3D
0x00000040: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  3A 3B 58 59 3E 3F 5C 5D
0x00000060: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  5A 5B 78 79 5E 5F 7C 7D
0x00000080: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  7A 7B 98 99 7E 7F 9C 9D
0x000000a0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  9A 9B B8 B9 9E 9F BC BD
0x000000c0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  BA BB D8 D9 BE BF DC DD
0x000000e0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  DA DB F8 F9 DE DF FC FD
0x00000100: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  FA FB 18 19 FE FF 1C 1D
0x00000120: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Le nombre d'octets significatifs reste identique mais ce ne sont plus les
memes aussi bien a l'emission qu'a la reception
C'est comme si soit a l'emission soit a la reception, le channel conditionnait
quelle partie de la frame etait remplie

Test 16
-------

Idem test 13 avec timeslot 0, 1, 2, 3, 4, 5, 6, 7 affectes auw channels 0, 1, 2, 3, 4, 5, 6, 7 (mask 0xffff)
0x23200100 -> PCM_CTRL_REG
[ 4676.356000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=0, timeslot=0)
[ 4676.368000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=1, timeslot=1)
[ 4676.376000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=2, timeslot=2)
[ 4676.384000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=3, timeslot=3)
[ 4676.392000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=4, timeslot=4)
[ 4676.400000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=5, timeslot=5)
[ 4676.408000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=6, timeslot=6)
[ 4676.416000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=7, timeslot=7)

insmod bcm63xx-phone.ko mask=0xFFFF frame_size=256 ts_to_chans=0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 01 00 00 04 05  00 08 09 0A 00 0C 0D 0E
0x00000010: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00000020: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000030: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00000040: 22 23 40 41 26 27 44 45  2B 48 49 4A 2F 4C 4D 4E
0x00000050: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00000060: 42 43 60 61 46 47 64 65  4B 68 69 6A 4F 6C 6D 6E
0x00000070: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00000080: 62 63 80 81 66 67 84 85  6B 88 89 8A 6F 8C 8D 8E
0x00000090: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x000000a0: 82 83 A0 A1 86 87 A4 A5  8B A8 A9 AA 8F AC AD AE
0x000000b0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x000000c0: A2 A3 C0 C1 A6 A7 C4 C5  AB C8 C9 CA AF CC CD CE
0x000000d0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x000000e0: C2 C3 E0 E1 C6 C7 E4 E5  CB E8 E9 EA CF EC ED EE
0x000000f0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00000100: E2 E3 00 01 E6 E7 04 05  EB 08 09 0A EF 0C 0D 0E
0x00000110: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF

Pour une fois le nombre d'octets significatifs est de 32 octets (mais avec un trou de 16)

Test 17
-------

Idem test 13 avec timeslot 0 et 8 affecte channel 0, ts 1 et 9 affecte channel 1...

[ 5193.700000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=0, timeslot=0)
[ 5193.708000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=1, timeslot=1)
[ 5193.720000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=2, timeslot=2)
[ 5193.728000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=3, timeslot=3)
[ 5193.736000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=4, timeslot=4)
[ 5193.744000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=5, timeslot=5)
[ 5193.752000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=6, timeslot=6)
[ 5193.760000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=7, timeslot=7)
[ 5193.768000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=0, timeslot=8)
[ 5193.776000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=1, timeslot=9)
[ 5193.784000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=2, timeslot=10)
[ 5193.792000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=3, timeslot=11)
[ 5193.804000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=4, timeslot=12)
[ 5193.812000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=5, timeslot=13)
[ 5193.820000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=6, timeslot=14)
[ 5193.828000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=7, timeslot=15)

0x00002990: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x000029a0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x000029b0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x000029c0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x000029d0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x000029e0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x000029f0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002a00: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002a10: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002a20: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002a30: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002a40: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002a50: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002a60: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002a70: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002a80: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002a90: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF

Visiblement on ne lit pas les bons timeslot dans la trame :
on lirait plutot les timeslot 8 a 15
Il semblerait qu'un channel ne peut etre affecte qu'a un seul timeslot

Test 18
-------

[ 5815.728000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=4, timeslot=0)
[ 5815.736000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=5, timeslot=1)
[ 5815.744000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=6, timeslot=2)
[ 5815.752000] bcm63xx-phone pcm_timeslot_alloc 1379: pcm_timeslot_alloc(chnum=7, timeslot=3)

0x00002c20: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c30: 12 13 30 31 16 17 34 35  1B 38 39 3A 1F 3C 3D 3E
0x00002c40: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c50: 32 33 50 51 36 37 54 55  3B 58 59 5A 3F 5C 5D 5E
0x00002c60: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c70: 52 53 70 71 56 57 74 75  5B 78 79 7A 5F 7C 7D 7E
0x00002c80: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c90: 72 73 90 91 76 77 94 95  7B 98 99 9A 7F 9C 9D 9E
0x00002ca0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002cb0: 92 93 B0 B1 96 97 B4 B5  9B B8 B9 BA 9F BC BD BE
0x00002cc0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002cd0: B2 B3 D0 D1 B6 B7 D4 D5  BB D8 D9 DA BF DC DD DE
0x00002ce0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002cf0: D2 D3 F0 F1 D6 D7 F4 F5  DB F8 F9 FA DF FC FD FE
0x00002d00: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002d10: F2 F3 10 11 F6 F7 14 15  FB 18 19 1A FF 1C 1D 1E

Test 19
-------


insmod bcm63xx-phone.ko mask=0xF0F frame_size=256 ts_to_chans=0,0,1,1,2,2,3,3 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 01 00 00 04 05  00 08 09 0A 00 0C 0D 0E
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 02 03 20 21 06 07 24 25  0B 28 29 2A 0F 2C 2D 2E
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 22 23 40 41 26 27 44 45  2B 48 49 4A 2F 4C 4D 4E
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 42 43 60 61 46 47 64 65  4B 68 69 6A 4F 6C 6D 6E
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 62 63 80 81 66 67 84 85  6B 88 89 8A 6F 8C 8D 8E
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 82 83 A0 A1 86 87 A4 A5  8B A8 A9 AA 8F AC AD AE
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A2 A3 C0 C1 A6 A7 C4 C5  AB C8 C9 CA AF CC CD CE
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C2 C3 E0 E1 C6 C7 E4 E5  CB E8 E9 EA CF EC ED EE
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E2 E3 00 01 E6 E7 04 05  EB 08 09 0A EF 0C 0D 0E
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 20
-------

Idem test 1 mais mask 0x101

0x00002c20: 02 03 20 21 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c30: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c40: 22 23 40 41 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c50: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c60: 42 43 60 61 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c70: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c80: 62 63 80 81 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c90: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ca0: 82 83 A0 A1 00 00 00 00  00 00 00 00 00 00 00 00
0x00002cb0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002cc0: A2 A3 C0 C1 00 00 00 00  00 00 00 00 00 00 00 00
0x00002cd0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ce0: C2 C3 E0 E1 00 00 00 00  00 00 00 00 00 00 00 00
0x00002cf0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002d00: E2 E3 00 01 00 00 00 00  00 00 00 00 00 00 00 00

Test 21
-------

Idem test 1 mais mask 0x103

0x00002c20: 02 03 20 21 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c30: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c40: 22 23 40 41 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c50: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c60: 42 43 60 61 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c70: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c80: 62 63 80 81 00 00 00 00  00 00 00 00 00 00 00 00
0x00002c90: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ca0: 82 83 A0 A1 00 00 00 00  00 00 00 00 00 00 00 00
0x00002cb0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002cc0: A2 A3 C0 C1 00 00 00 00  00 00 00 00 00 00 00 00
0x00002cd0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ce0: C2 C3 E0 E1 00 00 00 00  00 00 00 00 00 00 00 00
0x00002cf0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002d00: E2 E3 00 01 00 00 00 00  00 00 00 00 00 00 00 00

Test 22
-------

Idem test 1 mais mask 0x301

0x00002e20: 02 03 20 21 06 07 24 25  00 00 00 00 00 00 00 00
0x00002e30: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e40: 22 23 40 41 26 27 44 45  00 00 00 00 00 00 00 00
0x00002e50: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e60: 42 43 60 61 46 47 64 65  00 00 00 00 00 00 00 00
0x00002e70: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e80: 62 63 80 81 66 67 84 85  00 00 00 00 00 00 00 00
0x00002e90: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ea0: 82 83 A0 A1 86 87 A4 A5  00 00 00 00 00 00 00 00
0x00002eb0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ec0: A2 A3 C0 C1 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x00002ed0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ee0: C2 C3 E0 E1 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x00002ef0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f00: E2 E3 00 01 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00002f10: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 22
-------

Idem test 1 mais mask 0x3FF

0x00002e20: 02 03 20 21 06 07 24 25  00 00 00 00 00 00 00 00
0x00002e30: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e40: 22 23 40 41 26 27 44 45  00 00 00 00 00 00 00 00
0x00002e50: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e60: 42 43 60 61 46 47 64 65  00 00 00 00 00 00 00 00
0x00002e70: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e80: 62 63 80 81 66 67 84 85  00 00 00 00 00 00 00 00
0x00002e90: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ea0: 82 83 A0 A1 86 87 A4 A5  00 00 00 00 00 00 00 00
0x00002eb0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ec0: A2 A3 C0 C1 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x00002ed0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ee0: C2 C3 E0 E1 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x00002ef0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f00: E2 E3 00 01 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00002f10: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 23
-------

- Test sans activer le mode ILB du Le88221 en activant que channel 1 pour voir quels sont les donnees recus (il ne faut pas que cela ait un rapport avec les octets emis)
insmod bcm63xx-phone.ko mask=0xffff ts_to_chans=0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,0,0x42,0,0x60,0x80,0x70,0x00,0x56,0x20,0x4A,0x02,0x40,2,0x42,2,0x60,0x80,0x70,0xC0,0x56,0x00

0x00002d80: FF FF FF 00 FF FF FF 00  FF FF FF FF FF FF FF FF
0x00002d90: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002da0: 00 00 00 00 00 00 01 00  FF FF FF FF FF FF FF FF
0x00002db0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002dc0: 00 FF 00 FF 00 FF 00 FF  FF FF FF FF FF FF FF FF
0x00002dd0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002de0: 00 00 00 00 00 01 00 01  FF FF FF FF FF FF FF FF
0x00002df0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e00: 00 00 FF FF 00 00 FF FE  FF FF FF FF FF FF FF FF
0x00002e10: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e20: FF FF FF FF FE FF FF FF  FF FF FF FF FF FF FF FF
0x00002e30: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e40: 00 00 00 00 00 00 00 00  FF FF FF FF FF FF FF FF

Test 24
-------

- Test sans activer le mode ILB du Le88221 en activant channel 1 et 2 pour voir quels sont les donnees recus (il ne faut pas que cela ait un rapport avec les octets emis)
insmod bcm63xx-phone.ko mask=0xffff ts_to_chans=0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,0,0x42,0,0x60,0x80,0x70,0x00,0x56,0x20,0x4A,0x02,0x40,2,0x42,2,0x60,0x80,0x70,0x00,0x56,0x20

0x00002b10: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002b20: FF FF FF FF FE FE FD FD  FF FF FF FF FE FE FD FD
0x00002b30: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002b40: FF FF FF FF FD FD FD FC  FF FF FF FF FD FD FD FC
0x00002b50: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002b60: FF FF FF FF FD FC FF FC  FF FF FF FF FD FC FF FC
0x00002b70: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002b80: FF FF FF FF FD FC FE FD  FF FF FF FF FD FC FE FD
0x00002b90: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ba0: FF FF FF FF FE FD FE FE  FF FF FF FF FE FD FE FE
0x00002bb0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002bc0: FF FF FF FF FD FD FE FE  FF FF FF FF FD FD FE FE
0x00002bd0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF


Test 25
-------

- Test en activant le mode ILB du Le88221 mais que pour channel 1 et en desactivant channel 2
insmod bcm63xx-phone.ko mask=0xffff ts_to_chans=0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,0,0x42,0,0x60,0x80,0x70,0x04,0x56,0x20,0x4A,0x02,0x40,2,0x42,2,0x60,0x80,0x70,0xC0,0x56,0x00

0x00002e20: 02 03 20 21 06 07 24 25  FF FF FF FF FF FF FF FF
0x00002e30: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e40: 22 23 40 41 26 27 44 45  FF FF FF FF FF FF FF FF
0x00002e50: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e60: 42 43 60 61 46 47 64 65  FF FF FF FF FF FF FF FF
0x00002e70: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e80: 62 63 80 81 66 67 84 85  FF FF FF FF FF FF FF FF
0x00002e90: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ea0: 82 83 A0 A1 86 87 A4 A5  FF FF FF FF FF FF FF FF
0x00002eb0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ec0: A2 A3 C0 C1 A6 A7 C4 C5  FF FF FF FF FF FF FF FF
0x00002ed0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ee0: C2 C3 E0 E1 C6 C7 E4 E5  FF FF FF FF FF FF FF FF
0x00002ef0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002f00: E2 E3 00 01 E6 E7 04 05  FF FF FF FF FF FF FF FF
0x00002f10: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF

Test 26
-------

- Test en activant le mode ILB du Le88221 pour channel 1 et 2
insmod bcm63xx-phone.ko mask=0xffff ts_to_chans=0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,0,0x42,0,0x60,0x80,0x70,0x04,0x56,0x20,0x4A,0x02,0x40,2,0x42,2,0x60,0x80,0x70,0x04,0x56,0x20

0x00002e20: 02 03 20 21 06 07 24 25  0B 28 29 2A 0F 2C 2D 2E
0x00002e30: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e40: 22 23 40 41 26 27 44 45  2B 48 49 4A 2F 4C 4D 4E
0x00002e50: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e60: 42 43 60 61 46 47 64 65  4B 68 69 6A 4F 6C 6D 6E
0x00002e70: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e80: 62 63 80 81 66 67 84 85  6B 88 89 8A 6F 8C 8D 8E
0x00002e90: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ea0: 82 83 A0 A1 86 87 A4 A5  8B A8 A9 AA 8F AC AD AE
0x00002eb0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ec0: A2 A3 C0 C1 A6 A7 C4 C5  AB C8 C9 CA AF CC CD CE
0x00002ed0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ee0: C2 C3 E0 E1 C6 C7 E4 E5  CB E8 E9 EA CF EC ED EE
0x00002ef0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002f00: E2 E3 00 01 E6 E7 04 05  EB 08 09 0A EF 0C 0D 0E
0x00002f10: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF

Test 27
-------

- Test en activant mode ILB mais en deplacant timeslot cote SLIC pour voir si impact sur les donnees recues (il faut que les timeslots non programmes soit a 0xff)
  pour confirmer que SLIC ne retransmet pas des donnees qui ne le concernent pas)
  channel 1 active seulement

insmod bcm63xx-phone.ko mask=0xffff ts_to_chans=0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,4,0x42,4,0x60,0x80,0x70,0x04,0x56,0x20,0x4A,0x02,0x40,6,0x42,6,0x60,0x80,0x70,0xC0,0x56,0x00

0x00002e20: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e30: C3 E0 E1 E2 C7 E4 E5 E6  FF FF FF FF FF FF FF FF
0x00002e40: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e50: E3 00 01 02 E7 04 05 06  FF FF FF FF FF FF FF FF
0x00002e60: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e70: 03 20 21 22 07 24 25 26  FF FF FF FF FF FF FF FF
0x00002e80: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e90: 23 40 41 42 27 44 45 46  FF FF FF FF FF FF FF FF
0x00002ea0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002eb0: 43 60 61 62 47 64 65 66  FF FF FF FF FF FF FF FF
0x00002ec0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ed0: 63 80 81 82 67 84 85 86  FF FF FF FF FF FF FF FF
0x00002ee0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ef0: 83 A0 A1 A2 87 A4 A5 A6  FF FF FF FF FF FF FF FF
0x00002f00: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002f10: A3 C0 C1 C2 A7 C4 C5 C6  FF FF FF FF FF FF FF FF

Test 28
-------

- Test en activant mode ILB mais en deplacant timeslot cote SLIC pour voir si impact sur les donnees recues (il faut que les timeslots non programmes soit a 0xff)
  pour confirmer que SLIC ne retransmet pas des donnees qui ne le concernent pas)

insmod bcm63xx-phone.ko mask=0xffff ts_to_chans=0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,4,0x42,4,0x60,0x80,0x70,0x04,0x56,0x20,0x4A,0x02,0x40,6,0x42,6,0x60,0x80,0x70,0x04,0x56,0x20

0x00002e20: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e30: 13 30 31 32 17 34 35 36  1B 38 39 3A 1F 3C 3D 3E
0x00002e40: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e50: 33 50 51 52 37 54 55 56  3B 58 59 5A 3F 5C 5D 5E
0x00002e60: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e70: 53 70 71 72 57 74 75 76  5B 78 79 7A 5F 7C 7D 7E
0x00002e80: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e90: 73 90 91 92 77 94 95 96  7B 98 99 9A 7F 9C 9D 9E
0x00002ea0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002eb0: 93 B0 B1 B2 97 B4 B5 B6  9B B8 B9 BA 9F BC BD BE
0x00002ec0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ed0: B3 D0 D1 D2 B7 D4 D5 D6  BB D8 D9 DA BF DC DD DE
0x00002ee0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ef0: D3 F0 F1 F2 D7 F4 F5 F6  DB F8 F9 FA DF FC FD FE
0x00002f00: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002f10: F3 10 11 12 F7 14 15 16  FB 18 19 1A FF 1C 1D 1E

Test 29
-------

Test sur influence allocation timeslot
2 channels du SLIC en mode ILB
A comparer avec le test 26

insmod bcm63xx-phone.ko mask=0xffff ts_to_chans=2,0,3,1,0,2,1,3,4,4,5,5,6,6,7,7 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,0,0x42,0,0x60,0x80,0x70,0x04,0x56,0x20,0x4A,0x02,0x40,2,0x42,2,0x60,0x80,0x70,0x04,0x56,0x20

0x00002e20: 03 20 21 22 07 24 25 26  0A 0B 28 29 0E 0F 2C 2D
0x00002e30: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e40: 23 40 41 42 27 44 45 46  2A 2B 48 49 2E 2F 4C 4D
0x00002e50: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e60: 43 60 61 62 47 64 65 66  4A 4B 68 69 4E 4F 6C 6D
0x00002e70: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e80: 63 80 81 82 67 84 85 86  6A 6B 88 89 6E 6F 8C 8D
0x00002e90: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ea0: 83 A0 A1 A2 87 A4 A5 A6  8A 8B A8 A9 8E 8F AC AD
0x00002eb0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ec0: A3 C0 C1 C2 A7 C4 C5 C6  AA AB C8 C9 AE AF CC CD
0x00002ed0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ee0: C3 E0 E1 E2 C7 E4 E5 E6  CA CB E8 E9 CE CF EC ED
0x00002ef0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002f00: E3 00 01 02 E7 04 05 06  EA EB 08 09 EE EF 0C 0D
0x00002f10: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF

Test 30
-------

Apres confirmer que le flag RX mettent a 0 octet trame recue

Desactivation du channel RX 0

insmod bcm63xx-phone.ko mask=0xfeff ts_to_chans=2,0,3,1,0,2,1,3,4,4,5,5,6,6,7,7 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,0,0x42,0,0x60,0x80,0x70,0x04,0x56,0x20,0x4A,0x02,0x40,2,0x42,2,0x60,0x80,0x70,0x04,0x56,0x20

0x00002e20: 00 00 00 00 07 24 25 26  0A 0B 28 29 0E 0F 2C 2D
0x00002e30: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e40: 00 00 00 00 27 44 45 46  2A 2B 48 49 2E 2F 4C 4D
0x00002e50: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e60: 00 00 00 00 47 64 65 66  4A 4B 68 69 4E 4F 6C 6D
0x00002e70: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e80: 00 00 00 00 67 84 85 86  6A 6B 88 89 6E 6F 8C 8D
0x00002e90: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ea0: 00 00 00 00 87 A4 A5 A6  8A 8B A8 A9 8E 8F AC AD
0x00002eb0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ec0: 00 00 00 00 A7 C4 C5 C6  AA AB C8 C9 AE AF CC CD
0x00002ed0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ee0: 00 00 00 00 C7 E4 E5 E6  CA CB E8 E9 CE CF EC ED
0x00002ef0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002f00: 00 00 00 00 E7 04 05 06  EA EB 08 09 EE EF 0C 0D
0x00002f10: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF

Test 31
-------

Desactivation des channels RX 0 et 1

insmod bcm63xx-phone.ko mask=0xfcff ts_to_chans=2,0,3,1,0,2,1,3,4,4,5,5,6,6,7,7 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,0,0x42,0,0x60,0x80,0x70,0x04,0x56,0x20,0x4A,0x02,0x40,2,0x42,2,0x60,0x80,0x70,0x04,0x56,0x20

0x00002e20: 00 00 00 00 00 00 00 00  0A 0B 28 29 0E 0F 2C 2D
0x00002e30: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e40: 00 00 00 00 00 00 00 00  2A 2B 48 49 2E 2F 4C 4D
0x00002e50: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e60: 00 00 00 00 00 00 00 00  4A 4B 68 69 4E 4F 6C 6D
0x00002e70: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e80: 00 00 00 00 00 00 00 00  6A 6B 88 89 6E 6F 8C 8D
0x00002e90: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ea0: 00 00 00 00 00 00 00 00  8A 8B A8 A9 8E 8F AC AD
0x00002eb0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ec0: 00 00 00 00 00 00 00 00  AA AB C8 C9 AE AF CC CD
0x00002ed0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ee0: 00 00 00 00 00 00 00 00  CA CB E8 E9 CE CF EC ED
0x00002ef0: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002f00: 00 00 00 00 00 00 00 00  EA EB 08 09 EE EF 0C 0D
0x00002f10: FF FF FF FF FF FF FF FF  FF FF FF FF FF FF FF FF

Test 32
-------

Desactivation des channels RX 0, 1 et 4

insmod bcm63xx-phone.ko mask=0xecff ts_to_chans=2,0,3,1,0,2,1,3,4,4,5,5,6,6,7,7 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,0,0x42,0,0x60,0x80,0x70,0x04,0x56,0x20,0x4A,0x02,0x40,2,0x42,2,0x60,0x80,0x70,0x04,0x56,0x20

0x00002e20: 00 00 00 00 00 00 00 00  0A 0B 28 29 0E 0F 2C 2D
0x00002e30: 00 00 00 00 FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e40: 00 00 00 00 00 00 00 00  2A 2B 48 49 2E 2F 4C 4D
0x00002e50: 00 00 00 00 FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e60: 00 00 00 00 00 00 00 00  4A 4B 68 69 4E 4F 6C 6D
0x00002e70: 00 00 00 00 FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002e80: 00 00 00 00 00 00 00 00  6A 6B 88 89 6E 6F 8C 8D
0x00002e90: 00 00 00 00 FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ea0: 00 00 00 00 00 00 00 00  8A 8B A8 A9 8E 8F AC AD
0x00002eb0: 00 00 00 00 FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ec0: 00 00 00 00 00 00 00 00  AA AB C8 C9 AE AF CC CD
0x00002ed0: 00 00 00 00 FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002ee0: 00 00 00 00 00 00 00 00  CA CB E8 E9 CE CF EC ED
0x00002ef0: 00 00 00 00 FF FF FF FF  FF FF FF FF FF FF FF FF
0x00002f00: 00 00 00 00 00 00 00 00  EA EB 08 09 EE EF 0C 0D
0x00002f10: 00 00 00 00 FF FF FF FF  FF FF FF FF FF FF FF FF

Test 33
-------

Pas d'allocation de timeslot

insmod bcm63xx-phone.ko mask=0xffff ts_to_chans=0 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,0,0x42,0,0x60,0x80,0x70,0x04,0x56,0x20,0x4A,0x02,0x40,2,0x42,2,0x60,0x80,0x70,0x04,0x56,0x20

0x00002e20: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e30: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e40: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e50: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e60: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e70: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e80: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e90: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ea0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002eb0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ec0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ed0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ee0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ef0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f00: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 34
-------

Pour confirmer que un channel par timeslot et inversement

Idem test 14 avec ts_to_chans=0,0

0x00002e20: 02 03 20 21 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e30: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e40: 22 23 40 41 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e50: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e60: 42 43 60 61 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e70: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e80: 62 63 80 81 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e90: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ea0: 82 83 A0 A1 00 00 00 00  00 00 00 00 00 00 00 00
0x00002eb0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ec0: A2 A3 C0 C1 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ed0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ee0: C2 C3 E0 E1 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ef0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f00: E2 E3 00 01 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f10: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 35
-------

Idem test 15 avec ts_to_chans=0,6,1,7 seulement

0x00002e20: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e30: 00 00 00 00 00 00 00 00  1A 1B 38 39 1E 1F 3C 3D
0x00002e40: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e50: 00 00 00 00 00 00 00 00  3A 3B 58 59 3E 3F 5C 5D
0x00002e60: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e70: 00 00 00 00 00 00 00 00  5A 5B 78 79 5E 5F 7C 7D
0x00002e80: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e90: 00 00 00 00 00 00 00 00  7A 7B 98 99 7E 7F 9C 9D
0x00002ea0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002eb0: 00 00 00 00 00 00 00 00  9A 9B B8 B9 9E 9F BC BD
0x00002ec0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ed0: 00 00 00 00 00 00 00 00  BA BB D8 D9 BE BF DC DD
0x00002ee0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ef0: 00 00 00 00 00 00 00 00  DA DB F8 F9 DE DF FC FD
0x00002f00: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f10: 00 00 00 00 00 00 00 00  FA FB 18 19 FE FF 1C 1D

Test 36
-------

Idem test 18 avec ts_to_chans=0,4,1,5,2,6,3,7

0x00002e20: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e30: 12 13 30 31 16 17 34 35  1B 38 39 3A 1F 3C 3D 3E
0x00002e40: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e50: 32 33 50 51 36 37 54 55  3B 58 59 5A 3F 5C 5D 5E
0x00002e60: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e70: 52 53 70 71 56 57 74 75  5B 78 79 7A 5F 7C 7D 7E
0x00002e80: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e90: 72 73 90 91 76 77 94 95  7B 98 99 9A 7F 9C 9D 9E
0x00002ea0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002eb0: 92 93 B0 B1 96 97 B4 B5  9B B8 B9 BA 9F BC BD BE
0x00002ec0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ed0: B2 B3 D0 D1 B6 B7 D4 D5  BB D8 D9 DA BF DC DD DE
0x00002ee0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ef0: D2 D3 F0 F1 D6 D7 F4 F5  DB F8 F9 FA DF FC FD FE
0x00002f00: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f10: F2 F3 10 11 F6 F7 14 15  FB 18 19 1A FF 1C 1D 1E

Test 37
-------

Pour voir si je deplace la fenetre des donnees recue, test avec ts_to_chans=0,2,1,3,2,4,3,5

0x00002e20: 00 00 00 00 00 00 00 00  0A 0B 28 29 0E 0F 2C 2D
0x00002e30: 13 30 31 32 17 34 35 36  00 00 00 00 00 00 00 00
0x00002e40: 00 00 00 00 00 00 00 00  2A 2B 48 49 2E 2F 4C 4D
0x00002e50: 33 50 51 52 37 54 55 56  00 00 00 00 00 00 00 00
0x00002e60: 00 00 00 00 00 00 00 00  4A 4B 68 69 4E 4F 6C 6D
0x00002e70: 53 70 71 72 57 74 75 76  00 00 00 00 00 00 00 00
0x00002e80: 00 00 00 00 00 00 00 00  6A 6B 88 89 6E 6F 8C 8D
0x00002e90: 73 90 91 92 77 94 95 96  00 00 00 00 00 00 00 00
0x00002ea0: 00 00 00 00 00 00 00 00  8A 8B A8 A9 8E 8F AC AD
0x00002eb0: 93 B0 B1 B2 97 B4 B5 B6  00 00 00 00 00 00 00 00
0x00002ec0: 00 00 00 00 00 00 00 00  AA AB C8 C9 AE AF CC CD
0x00002ed0: B3 D0 D1 D2 B7 D4 D5 D6  00 00 00 00 00 00 00 00
0x00002ee0: 00 00 00 00 00 00 00 00  CA CB E8 E9 CE CF EC ED
0x00002ef0: D3 F0 F1 F2 D7 F4 F5 F6  00 00 00 00 00 00 00 00
0x00002f00: 00 00 00 00 00 00 00 00  EA EB 08 09 EE EF 0C 0D
0x00002f10: F3 10 11 12 F7 14 15 16  00 00 00 00 00 00 00 00

Test 38
-------

- faire test avec ts_to_chans=0,0,1,2,2,4,3,6 avec mask=0xffff

0x00002e20: 02 03 20 21 00 00 00 00  0A 0B 28 29 00 00 00 00
0x00002e30: 13 30 31 32 00 00 00 00  1B 38 39 3A 00 00 00 00
0x00002e40: 22 23 40 41 00 00 00 00  2A 2B 48 49 00 00 00 00
0x00002e50: 33 50 51 52 00 00 00 00  3B 58 59 5A 00 00 00 00
0x00002e60: 42 43 60 61 00 00 00 00  4A 4B 68 69 00 00 00 00
0x00002e70: 53 70 71 72 00 00 00 00  5B 78 79 7A 00 00 00 00
0x00002e80: 62 63 80 81 00 00 00 00  6A 6B 88 89 00 00 00 00
0x00002e90: 73 90 91 92 00 00 00 00  7B 98 99 9A 00 00 00 00
0x00002ea0: 82 83 A0 A1 00 00 00 00  8A 8B A8 A9 00 00 00 00
0x00002eb0: 93 B0 B1 B2 00 00 00 00  9B B8 B9 BA 00 00 00 00
0x00002ec0: A2 A3 C0 C1 00 00 00 00  AA AB C8 C9 00 00 00 00
0x00002ed0: B3 D0 D1 D2 00 00 00 00  BB D8 D9 DA 00 00 00 00
0x00002ee0: C2 C3 E0 E1 00 00 00 00  CA CB E8 E9 00 00 00 00
0x00002ef0: D3 F0 F1 F2 00 00 00 00  DB F8 F9 FA 00 00 00 00
0x00002f00: E2 E3 00 01 00 00 00 00  EA EB 08 09 00 00 00 00
0x00002f10: F3 10 11 12 00 00 00 00  FB 18 19 1A 00 00 00 00

Test 39
-------

- faire test avec ts_to_chans=0,0,1,2,2,4,3,6 avec mask=0x55ff devrait donner la meme chose que le test precedent

0x00002e20: 02 03 20 21 00 00 00 00  0A 0B 28 29 00 00 00 00
0x00002e30: 13 30 31 32 00 00 00 00  1B 38 39 3A 00 00 00 00
0x00002e40: 22 23 40 41 00 00 00 00  2A 2B 48 49 00 00 00 00
0x00002e50: 33 50 51 52 00 00 00 00  3B 58 59 5A 00 00 00 00
0x00002e60: 42 43 60 61 00 00 00 00  4A 4B 68 69 00 00 00 00
0x00002e70: 53 70 71 72 00 00 00 00  5B 78 79 7A 00 00 00 00
0x00002e80: 62 63 80 81 00 00 00 00  6A 6B 88 89 00 00 00 00
0x00002e90: 73 90 91 92 00 00 00 00  7B 98 99 9A 00 00 00 00
0x00002ea0: 82 83 A0 A1 00 00 00 00  8A 8B A8 A9 00 00 00 00
0x00002eb0: 93 B0 B1 B2 00 00 00 00  9B B8 B9 BA 00 00 00 00
0x00002ec0: A2 A3 C0 C1 00 00 00 00  AA AB C8 C9 00 00 00 00
0x00002ed0: B3 D0 D1 D2 00 00 00 00  BB D8 D9 DA 00 00 00 00
0x00002ee0: C2 C3 E0 E1 00 00 00 00  CA CB E8 E9 00 00 00 00
0x00002ef0: D3 F0 F1 F2 00 00 00 00  DB F8 F9 FA 00 00 00 00
0x00002f00: E2 E3 00 01 00 00 00 00  EA EB 08 09 00 00 00 00
0x00002f10: F3 10 11 12 00 00 00 00  FB 18 19 1A 00 00 00 00

Test 40
-------

DATA_16=1
insmod bcm63xx-phone.ko ts_to_chans=0,0,1,1,2,2,3,3 mask=0xffff frame_size=0x00800100

0x00002e20: 00 01 02 03 06 07 24 25  FF FF FF FF FF FF FF FF
0x00002e30: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e40: 20 21 22 23 26 27 44 45  FF FF FF FF FF FF FF FF
0x00002e50: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e60: 40 41 42 43 46 47 64 65  FF FF FF FF FF FF FF FF
0x00002e70: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e80: 60 61 62 63 66 67 84 85  FF FF FF FF FF FF FF FF
0x00002e90: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ea0: 80 81 82 83 86 87 A4 A5  FF FF FF FF FF FF FF FF
0x00002eb0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ec0: A0 A1 A2 A3 A6 A7 C4 C5  FF FF FF FF FF FF FF FF
0x00002ed0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ee0: C0 C1 C2 C3 C6 C7 E4 E5  FF FF FF FF FF FF FF FF
0x00002ef0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f00: E0 E1 E2 E3 E6 E7 04 05  FF FF FF FF FF FF FF FF
0x00002f10: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 41
-------

DATA_16=1
insmod bcm63xx-phone.ko ts_to_chans=0,0,1,1 mask=0xffff frame_size=0x00800100

0x00002e20: 00 01 02 03 06 07 24 25  00 00 00 00 00 00 00 00
0x00002e30: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e40: 20 21 22 23 26 27 44 45  00 00 00 00 00 00 00 00
0x00002e50: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e60: 40 41 42 43 46 47 64 65  00 00 00 00 00 00 00 00
0x00002e70: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e80: 60 61 62 63 66 67 84 85  00 00 00 00 00 00 00 00
0x00002e90: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ea0: 80 81 82 83 86 87 A4 A5  00 00 00 00 00 00 00 00
0x00002eb0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ec0: A0 A1 A2 A3 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x00002ed0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ee0: C0 C1 C2 C3 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x00002ef0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f00: E0 E1 E2 E3 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00002f10: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Ce qui est interessant a remarquer est que l'on a emis
les octets 0 a 3 sur le channel 0, les octets 4 a 8 sur le channel 1...
Par contre les octets 0 a 3 sont recus apres les octets 4 et 5
Pourquoi ?

Test 42
-------

Tester avec uniquement bits TX actives, mais bit TX0 eteint, par exemple mask 0x40
Pour voir si n'importe quel bit TX active emission ou bien que le bit 0

insmod bcm63xx-phone.ko mask=0x40 frame_size=256 ts_to_chans=0,0,1,1,2,2,3,3 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00002e20: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e30: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e40: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e50: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e60: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e70: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e80: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e90: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ea0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002eb0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ec0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ed0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ee0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ef0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f00: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f10: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 43
-------

Tester
- en programmant le SLIC pour recevoir dans timeslot 20 a 23 et pour emettre sur 20 a 23
- mask 0xFFFF (tous les channels actifs)
- ts_to_chans=20,0,21,1,22,2,23,3

insmod bcm63xx-phone.ko mask=0xFFFF ts_to_chans=20,0,21,1,22,2,23,3 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,20,0x42,20,0x60,0x80,0x70,0x04,0x56,0x20,0x4A,0x02,0x40,22,0x42,22,0x60,0x80,0x70,0x04,0x56,0x20

0x00002e20: 03 20 21 22 07 24 25 26  0B 28 29 2A 0F 2C 2D 2E
0x00002e30: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e40: 23 40 41 42 27 44 45 46  2B 48 49 4A 2F 4C 4D 4E
0x00002e50: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e60: 43 60 61 62 47 64 65 66  4B 68 69 6A 4F 6C 6D 6E
0x00002e70: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e80: 63 80 81 82 67 84 85 86  6B 88 89 8A 6F 8C 8D 8E
0x00002e90: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ea0: 83 A0 A1 A2 87 A4 A5 A6  8B A8 A9 AA 8F AC AD AE
0x00002eb0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ec0: A3 C0 C1 C2 A7 C4 C5 C6  AB C8 C9 CA AF CC CD CE
0x00002ed0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ee0: C3 E0 E1 E2 C7 E4 E5 E6  CB E8 E9 EA CF EC ED EE
0x00002ef0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f00: E3 00 01 02 E7 04 05 06  EB 08 09 0A EF 0C 0D 0E
0x00002f10: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Visiblement le module de reception se sert de la table d'allocation

Test 44
-------

Tester
- en programmant le SLIC pour recevoir dans timeslot 20 a 23 et pour emettre sur 12 a 15
- mask 0xF0F (4 channels actifs)
- ts_to_chans=20,0,21,1,22,2,23,3
Si emission ne se sert pas de la table d'allocation et que c'est juste la reception qui s'en sert
On va emettre sur timeslots 0 a 15 (au pire), donc le SLIC ne peut que renvoyer 0xFF
on devrait donc recevoir 0xFF dans les channels 0 a 3
Si emission se sert de la table d'allocation, mais que la reception ne s'en sert pas
on devrait recevoir des octets puisque les channels 0 a 3 recoivent les timeslots 0 a 3
Si emission et reception se servent de la table d'allocation, on devrait recevoir egalement 0xFF
puisque l'on va stocker les timeslots 4 a 7 aux channels 0 a 3 et que seuls 2 channels sont actives par le mask

insmod bcm63xx-phone.ko mask=0x303 frame_size=256 ts_to_chans=20,0,21,1,22,2,23,3 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,20,0x42,12,0x60,0x80,0x70,0x04,0x56,0x20,0x4A,0x02,0x40,22,0x42,14,0x60,0x80,0x70,0x04,0x56,0x20

0x00002e20: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002e30: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e40: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002e50: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e60: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002e70: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e80: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002e90: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ea0: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002eb0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ec0: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002ed0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ee0: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002ef0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f00: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002f10: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Voir si l'on continue a recevoir des donnees
Si l'on continue a recevoir des donnees c'est que la reception se sert de la table d'allocation

Test 45
-------

Si on ne recoit rien programmer le SLIC pour pour renvoyer sur les timeslot 0 a 3 pour confirmer que dans ce cas on recoit des donnees

insmod bcm63xx-phone.ko mask=0x303 ts_to_chans=20,0,21,1,22,2,23,3 mpi=0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x01,0x40,20,0x42,0,0x60,0x80,0x70,0x04,0x56,0x20,0x4A,0x02,0x40,22,0x42,2,0x60,0x80,0x70,0x04,0x56,0x20

0x00002e20: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002e30: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e40: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002e50: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e60: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002e70: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e80: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002e90: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ea0: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002eb0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ec0: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002ed0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ee0: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002ef0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f00: FF FF FF FF FF FF FF FF  00 00 00 00 00 00 00 00
0x00002f10: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Visiblement le module de reception et d'emission se servent de la table d'allocation

Test 46
-------

insmod bcm63xx-phone.ko mask=0x303 frame_size=256 ts_to_chans=0,0,1,1,2,2,3,3 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00002e20: 02 03 20 21 06 07 24 25  00 00 00 00 00 00 00 00
0x00002e30: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e40: 22 23 40 41 26 27 44 45  00 00 00 00 00 00 00 00
0x00002e50: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e60: 42 43 60 61 46 47 64 65  00 00 00 00 00 00 00 00
0x00002e70: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002e80: 62 63 80 81 66 67 84 85  00 00 00 00 00 00 00 00
0x00002e90: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ea0: 82 83 A0 A1 86 87 A4 A5  00 00 00 00 00 00 00 00
0x00002eb0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ec0: A2 A3 C0 C1 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x00002ed0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002ee0: C2 C3 E0 E1 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x00002ef0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00002f00: E2 E3 00 01 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00002f10: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 47
-------

insmod bcm63xx-phone.ko mask=0xF03 frame_size=256 ts_to_chans=0,0,1,1,2,2,3,3 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 01 00 00 04 05  00 08 09 0A 00 0C 0D 0E
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 22 23 40 41 26 27 44 45  2B 48 49 4A 2F 4C 4D 4E
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 42 43 60 61 46 47 64 65  4B 68 69 6A 4F 6C 6D 6E
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 62 63 80 81 66 67 84 85  6B 88 89 8A 6F 8C 8D 8E
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 82 83 A0 A1 86 87 A4 A5  8B A8 A9 AA 8F AC AD AE
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A2 A3 C0 C1 A6 A7 C4 C5  AB C8 C9 CA AF CC CD CE
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C2 C3 E0 E1 C6 C7 E4 E5  CB E8 E9 EA CF EC ED EE
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E2 E3 00 01 E6 E7 04 05  EB 08 09 0A EF 0C 0D 0E
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000120: 02 03 20 21 06 07 24 25  0B 28 29 2A 0F 2C 2D 2E
0x00000130: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000140: 22 23 40 41 26 27 44 45  2B 48 49 4A 2F 4C 4D 4E

Test 48
-------

insmod bcm63xx-phone.ko mask=0xF03 frame_size=256 ts_to_chans=0,0 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 01 00 00 00 00  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 02 03 20 21 00 00 00 00  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 22 23 40 41 00 00 00 00  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 42 43 60 61 00 00 00 00  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 62 63 80 81 00 00 00 00  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 82 83 A0 A1 00 00 00 00  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: A2 A3 C0 C1 00 00 00 00  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: C2 C3 E0 E1 00 00 00 00  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: E2 E3 00 01 00 00 00 00  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 49
-------

insmod bcm63xx-phone.ko mask=0xF03 frame_size=256 ts_to_chans=1,1 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 00 00 00 04 05  00 00 00 00 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 00 00 00 00 06 07 24 25  00 00 00 00 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 00 00 00 00 26 27 44 45  00 00 00 00 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 00 00 00 00 46 47 64 65  00 00 00 00 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 00 00 00 00 66 67 84 85  00 00 00 00 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 00 00 00 00 86 87 A4 A5  00 00 00 00 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: 00 00 00 00 A6 A7 C4 C5  00 00 00 00 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: 00 00 00 00 C6 C7 E4 E5  00 00 00 00 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: 00 00 00 00 E6 E7 04 05  00 00 00 00 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 50
-------

insmod bcm63xx-phone.ko mask=0xF03 frame_size=256 ts_to_chans=2,2 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 00 00 00 00 00  00 08 09 0A 00 00 00 00
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 00 00 00 00 00 00 00 00  0B 28 29 2A 00 00 00 00
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 00 00 00 00 00 00 00 00  2B 48 49 4A 00 00 00 00
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 00 00 00 00 00 00 00 00  4B 68 69 6A 00 00 00 00
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 00 00 00 00 00 00 00 00  6B 88 89 8A 00 00 00 00
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 00 00 00 00 00 00 00 00  8B A8 A9 AA 00 00 00 00
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: 00 00 00 00 00 00 00 00  AB C8 C9 CA 00 00 00 00
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: 00 00 00 00 00 00 00 00  CB E8 E9 EA 00 00 00 00
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: 00 00 00 00 00 00 00 00  EB 08 09 0A 00 00 00 00
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

Test 50
-------

insmod bcm63xx-phone.ko mask=0xF03 frame_size=256 ts_to_chans=3,3 mpi=0x4A,0x01,0x40,0,0x42,0,0x4A,0x02,0x40,2,0x42,2,0x4A,0x03,0x46,0x02,0x44,0x40,0x4A,0x03,0x60,0x80,0x70,0x04,0x56,0x20

0x00000000: 00 00 00 00 00 00 00 00  00 00 00 00 00 0C 0D 0E
0x00000010: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000020: 00 00 00 00 00 00 00 00  00 00 00 00 0F 2C 2D 2E
0x00000030: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000040: 00 00 00 00 00 00 00 00  00 00 00 00 2F 4C 4D 4E
0x00000050: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000060: 00 00 00 00 00 00 00 00  00 00 00 00 4F 6C 6D 6E
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 00 00 00 00 00 00 00 00  00 00 00 00 6F 8C 8D 8E
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 00 00 00 00 00 00 00 00  00 00 00 00 8F AC AD AE
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: 00 00 00 00 00 00 00 00  00 00 00 00 AF CC CD CE
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: 00 00 00 00 00 00 00 00  00 00 00 00 CF EC ED EE
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: 00 00 00 00 00 00 00 00  00 00 00 00 EF 0C 0D 0E
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

- determiner comment eliminer les octets a 0 : est-ce grace aux bits
d'activation des channels ou grace a la table d'allocation des timeslots
- voir si le comportement est different si Le88221 est en compressed coding
- est-ce que Le88221 emet avec une trame de retard ou pas : sans doute mais ca n'a pas bcp d'influence

Test sur Rx packet size avec des trames de 32 octets, 36 buffers en reception et 32 en emission

mask=0x2FFFF, 0x4FFFF, 0x6FFFF... si bit 16 est a 0, reception au plus de 1024 octets
Si buffer fait 32 octets, reception de 31 buffers que le nombre de buffers soit
de 32, 36 ou 48 octets.
Si moins de 32 buffers, plantage du modem
Si buffer fait 64 octets, reception de 15 buffers
Si buffer de 1024 octets reception d'aucun buffer


mask=0xFFFF, reception de 627 buffers
0x00000060: 02 03 20 21 06 07 24 25  0B 28 29 2A 0F 2C 2D 2E
0x00000070: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000080: 22 23 40 41 26 27 44 45  2B 48 49 4A 2F 4C 4D 4E
0x00000090: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000a0: 42 43 60 61 46 47 64 65  4B 68 69 6A 4F 6C 6D 6E
0x000000b0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000c0: 62 63 80 81 66 67 84 85  6B 88 89 8A 6F 8C 8D 8E
0x000000d0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x000000e0: 82 83 A0 A1 86 87 A4 A5  8B A8 A9 AA 8F AC AD AE
0x000000f0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000100: A2 A3 C0 C1 A6 A7 C4 C5  AB C8 C9 CA AF CC CD CE
0x00000110: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000120: C2 C3 E0 E1 C6 C7 E4 E5  CB E8 E9 EA CF EC ED EE
0x00000130: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000140: E2 E3 00 01 E6 E7 04 05  EB 08 09 0A EF 0C 0D 0E
0x00000150: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

mask=0x1FFFF, reception de 753 buffers
0x00000350: 00 00 00 00 00 00 00 00  00 00 00 00 02 03 20 21
0x00000360: 06 07 24 25 0B 28 29 2A  0F 2C 2D 2E 00 00 00 00
0x00000370: 00 00 00 00 00 00 00 00  00 00 00 00 22 23 40 41
0x00000380: 26 27 44 45 2B 48 49 4A  2F 4C 4D 4E 00 00 00 00
0x00000390: 00 00 00 00 00 00 00 00  00 00 00 00 42 43 60 61
0x000003a0: 46 47 64 65 4B 68 69 6A  4F 6C 6D 6E 00 00 00 00
0x000003b0: 00 00 00 00 00 00 00 00  00 00 00 00 62 63 80 81
0x000003c0: 66 67 84 85 6B 88 89 8A  6F 8C 8D 8E 00 00 00 00
0x000003d0: 00 00 00 00 00 00 00 00  00 00 00 00 82 83 A0 A1
0x000003e0: 86 87 A4 A5 8B A8 A9 AA  8F AC AD AE 00 00 00 00
0x000003f0: 00 00 00 00 00 00 00 00  00 00 00 00 A2 A3 C0 C1
0x00000400: A6 A7 C4 C5 AB C8 C9 CA  AF CC CD CE 00 00 00 00
0x00000410: 00 00 00 00 00 00 00 00  00 00 00 00 C2 C3 E0 E1
0x00000420: C6 C7 E4 E5 CB E8 E9 EA  CF EC ED EE 00 00 00 00
0x00000430: 00 00 00 00 00 00 00 00  00 00 00 00 E2 E3 00 01
0x00000440: E6 E7 04 05 EB 08 09 0A  EF 0C 0D 0E 00 00 00 00

mask=0x3FFFF, reception de 40 buffers (1280 octets)

0x00000330: 00 00 00 00 00 00 00 00  00 00 00 00 E2 E3 00 01
0x00000340: E6 E7 04 05 EB 08 09 0A  EF 0C 0D 0E 00 00 00 00
0x00000350: 00 00 00 00 00 00 00 00  00 00 00 00 02 03 20 21
0x00000360: 06 07 24 25 0B 28 29 2A  0F 2C 2D 2E 00 00 00 00
0x00000370: 00 00 00 00 00 00 00 00  00 00 00 00 22 23 40 41
0x00000380: 26 27 44 45 2B 48 49 4A  2F 4C 4D 4E 00 00 00 00
0x00000390: 00 00 00 00 00 00 00 00  00 00 00 00 42 43 60 61
0x000003a0: 46 47 64 65 4B 68 69 6A  4F 6C 6D 6E 00 00 00 00
0x000003b0: 00 00 00 00 00 00 00 00  00 00 00 00 62 63 80 81
0x000003c0: 66 67 84 85 6B 88 89 8A  6F 8C 8D 8E 00 00 00 00
0x000003d0: 00 00 00 00 00 00 00 00  00 00 00 00 82 83 A0 A1
0x000003e0: 86 87 A4 A5 8B A8 A9 AA  8F AC AD AE 00 00 00 00
0x000003f0: 00 00 00 00 00 00 00 00  00 00 00 00 A2 A3 C0 C1
0x00000400: A6 A7 C4 C5 AB C8 C9 CA  AF CC CD CE 00 00 00 00
0x00000410: 00 00 00 00 00 00 00 00  00 00 00 00 C2 C3 E0 E1
0x00000420: C6 C7 E4 E5 CB E8 E9 EA  CF EC ED EE 00 00 00 00

mask=0x5FFFF, reception de 35 buffers (1120 octets)

0x00000330: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000340: C6 C7 E4 E5 CB E8 E9 EA  CF EC ED EE 00 00 00 00
0x00000350: 00 00 00 00 00 00 00 00  00 00 00 00 E2 E3 00 01
0x00000360: E6 E7 04 05 EB 08 09 0A  EF 0C 0D 0E 00 00 00 00
0x00000370: 00 00 00 00 00 00 00 00  00 00 00 00 02 03 20 21
0x00000380: 06 07 24 25 0B 28 29 2A  0F 2C 2D 2E 00 00 00 00
0x00000390: 00 00 00 00 00 00 00 00  00 00 00 00 22 23 40 41
0x000003a0: 26 27 44 45 2B 48 49 4A  2F 4C 4D 4E 00 00 00 00
0x000003b0: 00 00 00 00 00 00 00 00  00 00 00 00 42 43 60 61
0x000003c0: 46 47 64 65 4B 68 69 6A  4F 6C 6D 6E 00 00 00 00
0x000003d0: 00 00 00 00 00 00 00 00  00 00 00 00 62 63 80 81
0x000003e0: 66 67 84 85 6B 88 89 8A  6F 8C 8D 8E 00 00 00 00
0x000003f0: 00 00 00 00 00 00 00 00  00 00 00 00 82 83 A0 A1
0x00000400: 86 87 A4 A5 8B A8 A9 AA  8F AC AD AE 00 00 00 00
0x00000410: 00 00 00 00 00 00 00 00  00 00 00 00 A2 A3 C0 C1
0x00000420: A6 A7 C4 C5 AB C8 C9 CA  00 00 00 00 00 00 00 00

mask=0x7FFFF, reception de 34 buffers (1088 octets)

0x00000330: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000340: E6 E7 04 05 EB 08 09 0A  EF 0C 0D 0E 00 00 00 00
0x00000350: 00 00 00 00 00 00 00 00  00 00 00 00 02 03 20 21
0x00000360: 06 07 24 25 0B 28 29 2A  0F 2C 2D 2E 00 00 00 00
0x00000370: 00 00 00 00 00 00 00 00  00 00 00 00 22 23 40 41
0x00000380: 26 27 44 45 2B 48 49 4A  2F 4C 4D 4E 00 00 00 00
0x00000390: 00 00 00 00 00 00 00 00  00 00 00 00 42 43 60 61
0x000003a0: 46 47 64 65 4B 68 69 6A  4F 6C 6D 6E 00 00 00 00
0x000003b0: 00 00 00 00 00 00 00 00  00 00 00 00 62 63 80 81
0x000003c0: 66 67 84 85 6B 88 89 8A  6F 8C 8D 8E 00 00 00 00
0x000003d0: 00 00 00 00 00 00 00 00  00 00 00 00 82 83 A0 A1
0x000003e0: 86 87 A4 A5 8B A8 A9 AA  8F AC AD AE 00 00 00 00
0x000003f0: 00 00 00 00 00 00 00 00  00 00 00 00 A2 A3 C0 C1
0x00000400: A6 A7 C4 C5 00 00 00 00  00 00 00 00 00 00 00 00
0x00000410: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
0x00000420: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

mask=0x9FFFF, reception de 33 buffers (1056 octets)

0x00000270: 00 00 00 00 00 00 00 00  00 00 00 00 22 23 40 41
0x00000280: 26 27 44 45 2B 48 49 4A  2F 4C 4D 4E 00 00 00 00
0x00000290: 00 00 00 00 00 00 00 00  00 00 00 00 42 43 60 61
0x000002a0: 46 47 64 65 4B 68 69 6A  4F 6C 6D 6E 00 00 00 00
0x000002b0: 00 00 00 00 00 00 00 00  00 00 00 00 62 63 80 81
0x000002c0: 66 67 84 85 6B 88 89 8A  6F 8C 8D 8E 00 00 00 00
0x000002d0: 00 00 00 00 00 00 00 00  00 00 00 00 82 83 A0 A1
0x000002e0: 86 87 A4 A5 8B A8 A9 AA  8F AC AD AE 00 00 00 00
0x000002f0: 00 00 00 00 00 00 00 00  00 00 00 00 A2 A3 C0 C1
0x00000300: A6 A7 C4 C5 AB C8 C9 CA  AF CC CD CE 00 00 00 00
0x00000310: 00 00 00 00 00 00 00 00  00 00 00 00 C2 C3 E0 E1
0x00000320: C6 C7 E4 E5 CB E8 E9 EA  CF EC ED EE 00 00 00 00
0x00000330: 00 00 00 00 00 00 00 00  00 00 00 00 E2 E3 00 01
0x00000340: E6 E7 04 05 EB 08 09 0A  EF 0C 0D 0E 00 00 00 00
0x00000350: 00 00 00 00 00 00 00 00  00 00 00 00 02 03 20 21
0x00000360: 06 07 24 25 0B 28 29 2A  0F 2C 2D 2E 00 00 00 00

mask=0xBFFFF, reception de 34 buffers (1088 o) (19 si buffer de 64 octets (1216 o))

mask=0xDFFFF, reception de 48 buffers (1536 o) (24 si buffer de 64 octets (1536 o))

mask=0xFFFFF, reception de 31 buffers (992 o) (15 si buffer de 64 octets (960 o))

mask=0x11FFFF, reception de 33 buffers (1056 o)

mask=0x13FFFF, reception de 34 buffers (1088 o)

mask=0x15FFFF, reception de 37 buffers (1184 o)

mask=0x17FFFF, reception de 34 buffers (1088 o)

mask=0x19FFFF, reception de 38 buffers (1216 o)

mask=0x1BFFFF, reception de 34 buffers (1088 o)

mask=0x1DFFFF, reception de 49 buffers (1568 o)

mask=0x1FFFFF, reception de 42 buffers (1344 o)

mask=0x21FFFF, reception de 63 buffers (2016 o)

mask=0x23FFFF, reception de 34 buffers (1088 o)

mask=0x25FFFF, reception de 37 buffers (1184 o)

mask=0x27FFFF, reception de 38 buffers (1216 o)

mask=0x29FFFF, reception de 42 buffers (1344 o)

mask=0x2BFFFF, reception de 41 buffers (1312 o)

mask=0x2DFFFF, reception de 45 buffers (1440 o)

mask=0x2FFFFF, reception de 44 buffers (1408 o)

mask=0x31FFFF, reception de 37 buffers (1184 o)

mask=0x33FFFF, reception de 31 buffers (992 o)

mask=0x35FFFF, reception de 63 buffers (2016 o)

mask=0x37FFFF, reception de 34 buffers (1088 o)

mask=0x39FFFF, reception de 33 buffers (1056 o)

mask=0x3BFFFF, reception de 31 buffers (992 o)

mask=0x3DFFFF, reception de 47 buffers (1504 o)

mask=0x3FFFFF, reception de 31 buffers (992 o)

mask=0x41FFFF, reception de 35 buffers (1120 o)

mask=0x43FFFF, reception de 91 buffers (2912 o)

mask=0x45FFFF, reception de 45 buffers (1440 o)

mask=0x47FFFF, reception de 51 buffers (1632 o)

mask=0x49FFFF, reception de 31 buffers (992 o)

mask=0x4BFFFF, reception de 64 buffers (2048 o)

mask=0x4DFFFF, reception de 41 buffers (1312 o)

mask=0x4FFFFF, reception de 34 buffers (1088 o)

mask=0x51FFFF, reception de 46 buffers (1472 o)

mask=0x53FFFF, reception de 41 buffers (1312 o)

mask=0x61FFFF, reception de 50 buffers (1600 o)

mask=0x63FFFF, reception de 67 buffers (2144 o)

mask=0x71FFFF, reception de 79 buffers (2528 o)

mask=0x91FFFF, reception de 112 buffers (3584 o)

mask=0xABFFFF, reception de 34 buffers (1088 o)

mask=0xAFFFFF, reception de 64 buffers (2048 o)

mask=0xB1FFFF, reception de 74 buffers (2368 o)

mask=0xD1FFFF, reception de 57 buffers (1824 o)

mask=0xDFFFFF, reception de 44 buffers (1408 o)

mask=0xF1FFFF, reception de 61 buffers (1952 o)

mask=0xF3FFFF, reception de 31 buffers (992 o)

mask=0xF5FFFF, reception de 59 buffers (1888 o)

mask=0xF7FFFF, reception de 31 buffers (992 o)

mask=0xFFFFFF, reception de 31 buffers (992 o)

Que peut representer packet size :
- un nombre de buffer :
- un nombre d'octets :
- un nombre de timeslots :
- un nombre de channels :
- un nombre de frames et donc un nombre d'octets * 32 : non
- une puissance de 2

Si le bit 0 est a 0 et que d'autres bits sont a 1, on n'emet et on ne recoit rien

Il serait interessant de voir si decalage peut etre utilise ie si en configurant le88221
pour recevoir sur timeslot x et emettre sur timeslot x + 4,
on recoit les donnees que l'on a transmises

Conclusions

Si aucun bits RXx et TXx a 1, on n'emet plus : on reste bloque sur l'attente d'un buffer, ce qui veut dire que le DMA ne les transmet plus

Si au moins 1 bit RXs active on emet et on recoit (meme si aucun bit TX active) et le nombre d'octets significatifs depend
du nombre de bits RXx active : 1 bit == 4 octets soit un channel

Si au moins 1 bit TXs active, on emet, mais si aucun bit RX active on ne recoit que des donnees nulles

Questions :

* est-ce que les bits RXx activent les channels en reception ET en emission ?

* est-ce que les bits RX et TX sont inverses ie les bits RX controlent l'emission et non pas la reception ?

Framesize :

Aucun test ne permet de dire que cela a une quelconque influence.
Visiblement la valeur n'a aucune importance (a confirmer en testant avec une valeur nulle)

Taille des timeslots :

Si DATA_16 = 0, un timeslot fait 8 bits (pour le PCM)
Si DATA_16 = 1, un timeslot fait 16 bits (pour le PCM)

Table d'allocation des timeslots aux channels :

Elle sert pour l'emission et la reception comme le montre le test 45
Par contre il n'est pas possible d'affecter plusieurs timeslots a un channel
(que l'on soit en mode 16 bits ou 8 bits alors qu'un channel fait 32 bits)
et inversement, il n'est pas possible d'affecter plusieurs channels a un timeslot
(ce qui n'a de toute facon aucun sens)

Puisqu'elle sert a l'emission et a la reception il faut que le SLIC renvoie
les donnees d'un canal sur le meme timeslot que celui sur lequel elle les a recues.

L'echange de donnees entre le module PCM et le DMA.
Apparemment les transferts entre le module PCM et le DMA se font par
blocs de 32 octets (soit le nombre de channels 8 par la taille max d'un echantillon
4 octets en mode linear16).
Le nombre de channels actives et l'allocation timeslot channel n'a pas
d'influence.
Ce qui signifie qu'a l'emission toutes les donnees d'un bloc de 32 octets
ne sont pas transmises et que a la reception toutes les donnees d'un bloc
de 32 octets ne sont pas utiles

Faire test DATA_16=1 en mettant
dans channels 3 et 4
dans channels 2 et 3

Faire test DATA_16=0 en mettant le SLIC en mode compressed coding
pour voir comment sont places les donnees en essayant les differents channels

Multiplexage des donnees en mode 8 bits

* a l'emission

Divise bloc de 32 octets en 8 channels de 4 octets.
Ce qui permet de transmettre 4 trames
Premiere trame prend l'octet 0 du channel pour le placer dans le timeslot
Seconde trame prend l'octet 1 du channel pour le placer dans le timeslot
Troisieme trame prend l'octet 2 du channel pour le placer dans le timeslot
Quatrieme trame prend l'octet 3 du channel pour le placer dans le timeslot

* a la reception

C'est l'operation inverse
Premiere trame place l'octet du timeslot dans l'octet 0 du channel
Seconde trame place l'octet du timeslot dans l'octet 1 du channel
Troisieme trame place l'octet du timeslot dans l'octet 2 du channel
Quatrieme trame place l'octet du timeslot dans l'octet 3 du channel

Multiplexage des donnees en mode 16 bits

* a l'emission

Divise bloc de 32 octets en 8 channels de 4 octets.
Ce qui permet de transmettre 2 trames
Premiere trame prend les octets 0 et 1 du channel pour les placer dans le timeslot
Seconde trame prend les octets 2 et 3 du channel

* a la reception

Operation inverse de l'emission
Premiere trame place les 2 octets du timeslot dans les octets 0 et 1 du channel
Seconde trame place les 2 octets du timeslot dans les octets 1 et 2 du channel

L'operation de multiplexage / demultiplexage est alors relativement simple

A l'emission
Pour chaque canal je prend 4 octets
canal je prend 4 octet
